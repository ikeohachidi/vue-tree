var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,d=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,a=(e,a)=>{for(var n in a||(a={}))r.call(a,n)&&d(e,n,a[n]);if(t)for(var n of t(a))o.call(a,n)&&d(e,n,a[n]);return e};import{defineComponent as n,resolveComponent as l,openBlock as i,createBlock as s,Fragment as p,renderList as c,withModifiers as u,renderSlot as v,createTextVNode as h,toDisplayString as f,createSlots as y,createCommentVNode as g,withScopeId as m}from"vue";const N={show:!1,type:"dashed",color:"#adadad",width:1};var b=new class{constructor(){this.activeNode={}}deleteActiveNodeChild(){const{nodeList:e,activeChild:t}=this.activeNode;if(e&&t){const r=e.findIndex((e=>JSON.stringify(e)==JSON.stringify(t)));-1!==r&&e.splice(r,1),this.activeNode={}}}updateActiveNode(e){this.activeNode=e}},D=n({name:"tree",props:{modelValue:{type:Array},indentLevel:{default:10,type:Number},border:{default:()=>a({},N),type:Object},allowDragNDrop:{default:!1,type:Boolean}},emits:{"update:modelValue":e=>!0},computed:{nodes(){return this.modelValue},nodeBorder(){return{borderLeft:`${this.border.width||N.width}px ${this.border.type||N.type} ${this.border.color||N.color}`}},getIndentLevel(){return`${this.indentLevel}px`}},methods:{onDragNode(e,t){t.dataTransfer&&this.allowDragNDrop&&(t.dataTransfer.setData("text/plain",JSON.stringify(e)),b.updateActiveNode({nodeList:this.modelValue,activeChild:e}))},onDropNode(e,t){if(t.dataTransfer&&this.allowDragNDrop){const r=JSON.parse(t.dataTransfer.getData("text/plain"));if(!e||!r)return;if(JSON.stringify(e)===JSON.stringify(r))return;if(e.validator&&!e.validator(r,e))return;e.children.push(r),this.$emit("update:modelValue",this.nodes),b.deleteActiveNodeChild()}}}});const O=m("data-v-9d2039d0"),w=O(((e,t,r,o,d,n)=>{const m=l("tree",!0);return i(),s("ul",null,[(i(!0),s(p,null,c(e.nodes,((r,o)=>(i(),s("li",{key:o,draggable:!0,onDragover:t[1]||(t[1]=u((()=>{}),["stop","prevent"])),onDragenter:t[2]||(t[2]=u((()=>{}),["stop","prevent"])),onDragstart:u((t=>e.onDragNode(r,t)),["stop"]),onDrop:u((t=>e.onDropNode(r,t)),["prevent","stop"])},[v(e.$slots,"node",{node:r},(()=>[h(f(r.name),1)]),!0),r.children?(i(),s(m,{key:0,modelValue:r.children,"onUpdate:modelValue":e=>r.children=e,"indent-level":e.indentLevel,border:e.border,style:a({paddingLeft:e.getIndentLevel},e.nodeBorder)},y({_:2},[c(e.$slots,((t,r)=>({name:r,fn:O((t=>[v(e.$slots,r,t,void 0,!0)]))})))]),1032,["modelValue","onUpdate:modelValue","indent-level","border","style"])):g("",!0)],40,["onDragstart","onDrop"])))),128))])}));D.render=w,D.__scopeId="data-v-9d2039d0";export{D as VueQuickTree};
